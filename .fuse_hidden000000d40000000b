import markdown
from flask import Flask
from flask import render_template
from flask import Markup
from flaskext.flatpages import FlatPages

application = Flask(__name__)
application.debug=True

@application.route('/')
def index():
    content ="""
Chapter
=======

Section
-------
  
* Item 1
* Item 2
"""
    content = Markup(markdown.markdown(content))
    #    return render_template('index.html', content=content)
    return 'Hello world!  Er, no... wait, yes!'

@application.route('/bio/')
def bio_index():
    return 'all about me'

@application.route('/blog/')
def blog_index():
    return 'lots of blogs, so many blogs.'

@application.route('/research/')
def research_index():
    return 'lots of projects, so many projects.'

if __name__ == '__main__':
    application.run()
        
def parse_post_file(string, path):
    lines = iter(string.split(u'\n'))
    # Read lines until an empty line is encountered.                                                                                                                               
    meta = u'\n'.join(itertools.takewhile(unicode.strip, lines))
    # The rest is the content. `lines` is an iterator so it continues                                                                                                                 
    # where `itertools.takewhile` left it.                                                                                                                                            
    content = u'\n'.join(lines)
    
    html_renderer = self.app.config['FLATPAGES_HTML_RENDERER']
    if not callable(html_renderer):
        html_renderer = werkzeug.import_string(html_renderer)
    return Page(path, meta, content, html_renderer)
